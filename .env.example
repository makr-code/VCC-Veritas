# =============================================================================
# VERITAS Framework - Environment Configuration Template
# =============================================================================
# Copy this file to .env and fill in your values
# DO NOT commit .env to version control!
#
# Usage:
#   cp .env.example .env
#   Edit .env with your configuration
#   source .env (Linux/macOS) or Set-Content .env (Windows)
#
# Last Updated: 2025-10-08
# =============================================================================

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Application environment (development, staging, production)
APP_ENV=production

# Application name
APP_NAME=VERITAS

# Application version
APP_VERSION=1.0.0

# Debug mode (true for development, false for production)
DEBUG=false

# Secret key for cryptographic operations (generate with: openssl rand -hex 32)
SECRET_KEY=your-secret-key-here-change-me

# Application host and port
HOST=0.0.0.0
PORT=8000

# CORS allowed origins (comma-separated)
CORS_ORIGINS=https://veritas.example.com,https://app.veritas.example.com

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database type (sqlite, postgresql, mysql)
DB_TYPE=postgresql

# PostgreSQL configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=veritas
DB_USER=veritas_user
DB_PASSWORD=your-database-password-here

# Database connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# SQLite configuration (for development/testing)
SQLITE_DB_PATH=./data/veritas.sqlite

# Database SSL mode (disable, allow, prefer, require, verify-ca, verify-full)
DB_SSL_MODE=prefer

# =============================================================================
# REDIS CONFIGURATION (for caching and sessions)
# =============================================================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password-here
REDIS_DB=0
REDIS_SSL=false

# Redis connection pool
REDIS_POOL_SIZE=10
REDIS_POOL_TIMEOUT=5

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT settings
JWT_SECRET_KEY=your-jwt-secret-key-here-change-me
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Password policy
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGITS=true
PASSWORD_REQUIRE_SPECIAL=true

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# API key settings
API_KEY_HEADER=X-API-Key
API_KEY_EXPIRY_DAYS=365

# Session settings
SESSION_COOKIE_NAME=veritas_session
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax
SESSION_MAX_AGE=86400

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log format (json, text)
LOG_FORMAT=json

# Log output (console, file, both)
LOG_OUTPUT=both

# Log file path
LOG_FILE_PATH=./logs/veritas.log

# Log rotation
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=10

# Log additional details
LOG_INCLUDE_TIMESTAMP=true
LOG_INCLUDE_LEVEL=true
LOG_INCLUDE_MODULE=true
LOG_INCLUDE_FUNCTION=true

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Prometheus metrics
METRICS_ENABLED=true
METRICS_PORT=9090
METRICS_PATH=/metrics

# Grafana settings
GRAFANA_ENABLED=true
GRAFANA_URL=http://localhost:3000
GRAFANA_API_KEY=your-grafana-api-key-here

# Health check endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_DETAILED_PATH=/health/detailed

# Performance monitoring
APM_ENABLED=false
APM_SERVICE_NAME=veritas
APM_SERVER_URL=http://localhost:8200
APM_SECRET_TOKEN=your-apm-secret-token-here

# =============================================================================
# AGENT ORCHESTRATION
# =============================================================================

# Max concurrent agents
MAX_CONCURRENT_AGENTS=10

# Agent timeout (seconds)
AGENT_TIMEOUT=300

# Agent retry settings
AGENT_MAX_RETRIES=3
AGENT_RETRY_DELAY=5

# Quality gate thresholds
QUALITY_GATE_MIN_SCORE=0.7
QUALITY_GATE_ENABLED=true

# =============================================================================
# OLLAMA INTEGRATION
# =============================================================================

# Ollama API settings
OLLAMA_ENABLED=true
OLLAMA_API_URL=http://localhost:11434
OLLAMA_DEFAULT_MODEL=llama3.2:latest
OLLAMA_TIMEOUT=120

# Ollama embedding settings
OLLAMA_EMBEDDING_MODEL=nomic-embed-text
OLLAMA_EMBEDDING_DIMENSION=768

# =============================================================================
# STORAGE & FILE HANDLING
# =============================================================================

# Upload settings
UPLOAD_ENABLED=true
UPLOAD_MAX_SIZE_MB=100
UPLOAD_ALLOWED_EXTENSIONS=.txt,.pdf,.doc,.docx,.json,.csv

# Storage path
STORAGE_PATH=./data/uploads

# Temporary file cleanup
TEMP_FILE_CLEANUP_ENABLED=true
TEMP_FILE_CLEANUP_AGE_HOURS=24

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# Email settings (for notifications, password resets, etc.)
EMAIL_ENABLED=false
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USER=your-email@example.com
EMAIL_SMTP_PASSWORD=your-email-password-here
EMAIL_FROM_ADDRESS=noreply@veritas.example.com
EMAIL_FROM_NAME=VERITAS Framework
EMAIL_USE_TLS=true

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# Backup settings
BACKUP_ENABLED=true
BACKUP_PATH=./backups
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# Database backup
DB_BACKUP_ENABLED=true
DB_BACKUP_COMPRESSION=true
DB_BACKUP_ENCRYPTION=false

# File backup
FILE_BACKUP_ENABLED=true
FILE_BACKUP_INCREMENTAL=true

# Remote backup (S3, Azure Blob, etc.)
REMOTE_BACKUP_ENABLED=false
REMOTE_BACKUP_TYPE=s3
REMOTE_BACKUP_BUCKET=veritas-backups
REMOTE_BACKUP_REGION=us-east-1
REMOTE_BACKUP_ACCESS_KEY=your-access-key-here
REMOTE_BACKUP_SECRET_KEY=your-secret-key-here

# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================

# WebSocket settings
WEBSOCKET_ENABLED=true
WEBSOCKET_PORT=8001
WEBSOCKET_PATH=/ws
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_PING_INTERVAL=30
WEBSOCKET_PING_TIMEOUT=10

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Cache settings
CACHE_ENABLED=true
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300
CACHE_MAX_ENTRIES=10000

# Cache invalidation
CACHE_INVALIDATION_ENABLED=true
CACHE_INVALIDATION_PATTERNS=user:*,session:*

# =============================================================================
# QUEUE CONFIGURATION (for async tasks)
# =============================================================================

# Queue settings
QUEUE_ENABLED=true
QUEUE_TYPE=redis
QUEUE_MAX_WORKERS=4
QUEUE_MAX_QUEUE_SIZE=1000

# Task settings
TASK_DEFAULT_TIMEOUT=600
TASK_MAX_RETRIES=3
TASK_RETRY_DELAY=10

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker settings (used in docker-compose)
DOCKER_BACKEND_PORT=8000
DOCKER_FRONTEND_PORT=3000
DOCKER_POSTGRES_PORT=5432
DOCKER_REDIS_PORT=6379
DOCKER_PROMETHEUS_PORT=9090
DOCKER_GRAFANA_PORT=3000

# Docker compose project name
COMPOSE_PROJECT_NAME=veritas

# =============================================================================
# KUBERNETES CONFIGURATION
# =============================================================================

# Kubernetes namespace
K8S_NAMESPACE=veritas-production

# Resource limits
K8S_BACKEND_CPU_LIMIT=2000m
K8S_BACKEND_MEMORY_LIMIT=4Gi
K8S_BACKEND_REPLICAS=3

# Auto-scaling
K8S_HPA_ENABLED=true
K8S_HPA_MIN_REPLICAS=2
K8S_HPA_MAX_REPLICAS=10
K8S_HPA_TARGET_CPU=70

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Feature toggles
FEATURE_AGENT_ORCHESTRATION=true
FEATURE_QUALITY_GATES=true
FEATURE_STREAMING=true
FEATURE_MONITORING=true
FEATURE_ANALYTICS=false
FEATURE_AI_INSIGHTS=false

# Experimental features
EXPERIMENTAL_MULTI_TENANCY=false
EXPERIMENTAL_GRAPH_DATABASE=false
EXPERIMENTAL_VECTOR_SEARCH=false

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Slack integration
SLACK_ENABLED=false
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL=#veritas-alerts

# Sentry error tracking
SENTRY_ENABLED=false
SENTRY_DSN=https://your-sentry-dsn-here
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Analytics
ANALYTICS_ENABLED=false
ANALYTICS_TRACKING_ID=your-analytics-id-here

# =============================================================================
# DEVELOPMENT SETTINGS (not for production!)
# =============================================================================

# Development mode
DEV_MODE=false

# Auto-reload on code changes
AUTO_RELOAD=false

# SQL query logging
SQL_ECHO=false

# Profiling
PROFILING_ENABLED=false

# Mock external services
MOCK_EXTERNAL_SERVICES=false

# =============================================================================
# TESTING SETTINGS
# =============================================================================

# Test database
TEST_DB_NAME=veritas_test
TEST_DB_USER=veritas_test_user
TEST_DB_PASSWORD=test-password

# Test settings
TEST_MODE=false
TEST_SKIP_SLOW=false
TEST_PARALLEL=true

# =============================================================================
# SECURITY HEADERS
# =============================================================================

# Security headers (configured in middleware)
SECURITY_HEADERS_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_ENABLED=true
CSP_DEFAULT_SRC='self'
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff

# =============================================================================
# HYBRID SEARCH CONFIGURATION
# =============================================================================

# Enable/disable hybrid search globally (default: true)
HYBRID_SEARCH_ENABLED=true

# Ranking strategy: reciprocal_rank_fusion, weighted_combination, borda_count
HYBRID_RANKING_STRATEGY=reciprocal_rank_fusion

# Search weights (must sum to 1.0)
HYBRID_WEIGHT_VECTOR=0.6        # Dense retrieval (ChromaDB)
HYBRID_WEIGHT_GRAPH=0.2         # Knowledge graph (Neo4j)
HYBRID_WEIGHT_RELATIONAL=0.2    # Structured DB (PostgreSQL)

# Search filters
HYBRID_MAX_RESULTS=20           # Max results per retriever
HYBRID_MIN_RELEVANCE=0.5        # Min relevance threshold (0.0-1.0)

# RRF configuration
HYBRID_RRF_K=60                 # RRF k parameter (10-100 recommended)

# Re-ranking configuration
RERANKING_ENABLED=true
RERANKING_MODEL=llama3.1:8b
RERANKING_SCORING_MODE=combined  # relevance_only, informativeness, combined
RERANKING_TEMPERATURE=0.1        # LLM temperature (0.0-1.0)
RERANKING_BATCH_SIZE=5          # Documents per batch
RERANKING_TIMEOUT=30            # Timeout in seconds
RERANKING_MAX_RETRIES=2         # Max retry attempts

# Presets: balanced, vector_heavy, graph_heavy, fast, accurate, production
# Use get_preset_config("preset_name") in code instead of individual settings

# =============================================================================
# END OF CONFIGURATION
# =============================================================================

# Notes:
# - Generate strong secrets: openssl rand -hex 32
# - Never commit .env to version control
# - Use environment-specific .env files (.env.production, .env.staging)
# - Validate configuration on startup
# - Rotate secrets regularly (every 90 days recommended)
